const request = require('request');

module.exports.config = {
    name: 'rname',
    version: '1.0.0',
    credit: 'YourName',
    description: 'Äá»•i biá»‡t danh Random ',
    tag: 'system',
    usage: '!rname [NgÆ°á»i dÃ¹ng(náº¿u cáº§n)] '
  };
  
  module.exports.run = async function (api, event, args, client) {
    // Check if the thread exists before attempting to change the user nickname
    

    const countryCodes = [
        { code: "afk", full: "Afrikaans" },
        { code: "afr", full: "African" },
        { code: "aka", full: "Akan" },
        { code: "alb", full: "Albanian" },
        { code: "alg", full: "Algonquin" },
        { code: "ame", full: "Indigenous American" },
        { code: "amem", full: "New World Mythology" },
        { code: "amh", full: "Amharic" },
        { code: "anci", full: "Ancient" },
        { code: "apa", full: "Apache" },
        { code: "ara", full: "Arabic" },
        { code: "arm", full: "Armenian" },
        { code: "asm", full: "Assamese" },
        { code: "ast", full: "Asturian" },
        { code: "astr", full: "Astronomy" },
        { code: "aus", full: "Indigenous Australian" },
        { code: "ava", full: "Avar" },
        { code: "aym", full: "Aymara" },
        { code: "aze", full: "Azerbaijani" },
        { code: "bal", full: "Balinese" },
        { code: "bas", full: "Basque" },
        { code: "bel", full: "Belarusian" },
        { code: "ben", full: "Bengali" },
        { code: "ber", full: "Berber" },
        { code: "bhu", full: "Bhutanese" },
        { code: "bibl", full: "Biblical (All)" },
        { code: "bos", full: "Bosnian" },
        { code: "bre", full: "Breton" },
        { code: "bsh", full: "Bashkir" },
        { code: "bul", full: "Bulgarian" },
        { code: "bur", full: "Burmese" },
        { code: "cat", full: "Catalan" },
        { code: "cela", full: "Ancient Celtic" },
        { code: "celm", full: "Celtic Mythology" },
        { code: "cew", full: "Chewa" },
        { code: "cha", full: "Chamorro" },
        { code: "che", full: "Chechen" },
        { code: "chi", full: "Chinese" },
        { code: "chk", full: "Cherokee" },
        { code: "cht", full: "Choctaw" },
        { code: "chy", full: "Cheyenne" },
        { code: "cir", full: "Circassian" },
        { code: "cmr", full: "Comorian" },
        { code: "com", full: "Comanche" },
        { code: "cop", full: "Coptic" },
        { code: "cor", full: "Cornish" },
        { code: "cre", full: "Cree" },
        { code: "cro", full: "Croatian" },
        { code: "crs", full: "Corsican" },
        { code: "cze", full: "Czech" },
        { code: "dan", full: "Danish" },
        { code: "dgs", full: "Dagestani" },
        { code: "dhi", full: "Dhivehi" },
        { code: "dut", full: "Dutch" },
        { code: "egya", full: "Ancient Egyptian" },
        { code: "egym", full: "Egyptian Mythology" },
        { code: "eng", full: "English" },
        { code: "enga", full: "Anglo-Saxon" },
        { code: "esp", full: "Esperanto" },
        { code: "est", full: "Estonian" },
        { code: "eth", full: "Ethiopian" },
        { code: "ewe", full: "Ewe" },
        { code: "fae", full: "Faroese" },
        { code: "fairy", full: "Fairy" },
        { code: "fij", full: "Fijian" },
        { code: "fil", full: "Filipino" },
        { code: "fin", full: "Finnish" },
        { code: "fle", full: "Flemish" },
        { code: "fntsg", full: "Gluttakh" },
        { code: "fntsm", full: "Monstrall" },
        { code: "fntsr", full: "Romanto" },
        { code: "fntss", full: "Simitiq" },
        { code: "fntst", full: "Tsang" },
        { code: "fntsx", full: "Xalaxxi" },
        { code: "fre", full: "French" },
        { code: "fri", full: "Frisian" },
        { code: "ful", full: "Fula" },
        { code: "gaa", full: "Ga" },
        { code: "gal", full: "Galician" },
        { code: "gan", full: "Ganda" },
        { code: "geo", full: "Georgian" },
        { code: "ger", full: "German" },
        { code: "gmca", full: "Ancient Germanic" },
        { code: "goth", full: "Goth" },
        { code: "gre", full: "Greek" },
        { code: "grea", full: "Ancient Greek" },
        { code: "grem", full: "Greek Mythology" },
        { code: "grn", full: "Greenlandic" },
        { code: "gua", full: "Guarani" },
        { code: "guj", full: "Gujarati" },
        { code: "hau", full: "Hausa" },
        { code: "haw", full: "Hawaiian" },
        { code: "hb", full: "Hillbilly" },
        { code: "heb", full: "Hebrew" },
        { code: "hin", full: "Hindi" },
        { code: "hippy", full: "Hippy" },
        { code: "hist", full: "History" },
        { code: "hmo", full: "Hmong" },
        { code: "hun", full: "Hungarian" },
        { code: "ibi", full: "Ibibio" },
        { code: "ice", full: "Icelandic" },
        { code: "igb", full: "Igbo" },
        { code: "ind", full: "Indian" },
        { code: "indm", full: "Hindu Mythology" },
        { code: "ing", full: "Ingush" },
        { code: "ins", full: "Indonesian" },
        { code: "inu", full: "Inuit" },
        { code: "iri", full: "Irish" },
        { code: "iro", full: "Iroquois" },
        { code: "ita", full: "Italian" },
        { code: "jap", full: "Japanese" },
        { code: "jav", full: "Javanese" },
        { code: "jer", full: "JÃ¨rriais" },
        { code: "jew", full: "Jewish" },
        { code: "kan", full: "Kannada" },
        { code: "kaz", full: "Kazakh" },
        { code: "khm", full: "Khmer" },
        { code: "kig", full: "Kiga" },
        { code: "kik", full: "Kikuyu" },
        { code: "kk", full: "Kreatyve" },
        { code: "kon", full: "Kongo" },
        { code: "kor", full: "Korean" },
        { code: "kur", full: "Kurdish" },
        { code: "kyr", full: "Kyrgyz" },
        { code: "lao", full: "Lao" },
        { code: "lat", full: "Latvian" },
        { code: "lim", full: "Limburgish" },
        { code: "lite", full: "Literature" },
        { code: "litk", full: "Arthurian Romance" },
        { code: "lth", full: "Lithuanian" },
        { code: "luh", full: "Luhya" },
        { code: "luo", full: "Luo" },
        { code: "mac", full: "Macedonian" },
        { code: "mag", full: "Maguindanao" },
        { code: "mal", full: "Maltese" },
        { code: "man", full: "Manx" },
        { code: "mao", full: "Maori" },
        { code: "map", full: "Mapuche" },
        { code: "vie", full: "Vietnamese" },
        { code: "may", full: "Mayan" },
        { code: "mbu", full: "Mbundu" },
        { code: "medi", full: "Medieval" },
        { code: "mlm", full: "Malayalam" },
        { code: "mly", full: "Malay" },
        { code: "moh", full: "Mohawk" },
        { code: "mon", full: "Mongolian" },
        { code: "morm", full: "Mormon" },
        { code: "yor", full: "Yoruba" },
        { code: "zap", full: "Zapotec" },
        { code: "zul", full: "Zulu" }
    ];

    const gender = [
        { code: "m", full: "Nam" },
        { code: "f", full: "Ná»¯" },
        { code: "mf", full: "BÃª Ä‘Ãª" }
    ];
    const rdC = Math.floor(Math.random() * 149);
    const rdG = Math.floor(Math.random() * 3);
    request(`https://www.behindthename.com/api/random.json?usage=${countryCodes[rdC].code}&gender=${gender[rdG].code}&key=mi451266190`, (err, response, body) => {
    if (err) {
        console.error(err);
        return;
    }

    const data = JSON.parse(body);
    console.log(data, `https://www.behindthename.com/api/random.json?usage=${countryCodes[rdC].code}&gender=${gender[rdG].code}&key=mi451266190`);
    if (Object.keys(event.mentions).length === 0) {
      api.changeNickname(`${data.names[0]} ${data.names[1]}`, event.threadID, event.senderID);
      
      api.sendMessage({
          body: `TÃªn Ä‘Ã£ Ä‘á»•i thuá»™c quá»‘c gia ${formatFont(countryCodes[rdC].full)} vÃ  lÃ  tÃªn dÃ nh cho ${formatFont(gender[rdG].full)} (ï½ï¿£â–½ï¿£)ï½`,
          attachment: null,
          mentions: [],
          // MÃ£ mÃ u há»“ng
      }, event.threadID, event.messageID);
    }else if (Object.keys(event.mentions).length === 1) {
      
      const userID = Object.keys(event.mentions)[0];
      api.changeNickname(`${data.names[0]} ${data.names[1]}`, event.threadID, userID);
      
      api.sendMessage({
          body: `TÃªn Ä‘Ã£ Ä‘á»•i thuá»™c quá»‘c gia ${formatFont(countryCodes[rdC].full)} vÃ  lÃ  tÃªn dÃ nh cho ${formatFont(gender[rdG].full)} (ï½ï¿£â–½ï¿£)ï½`,
          attachment: null,
          mentions: [],
          // MÃ£ mÃ u há»“ng
      }, event.threadID, event.messageID);
    }else{
      api.sendMessage('CÃº phÃ¡p khÃ´ng há»£p lá»‡, sá»­ dá»¥ng !rname [NgÆ°á»i dÃ¹ng(náº¿u cáº§n)] ',event.threadID, event.messageID);
    }
    
});
};
function formatFont(text) {
    const fontMapping = {
      a: "ğ™–",
      Ã¡: "ğ™–Ì",
      Ã : "ğ™–Ì€",
      áº£: "ğ™–Ì‰",
      Ã£: "ğ™–Ìƒ",
      áº¡: "ğ™–Ì£",
      Äƒ: "ğ™–Ì†",
      áº¯: "ğ™–Ì†Ì",
      áº±: "ğ™–Ì†Ì€",
      áº³: "ğ™–Ì†Ì‰",
      áºµ: "ğ™–Ì†Ìƒ",
      áº·: "ğ™–Ì£Ì†",
      Ã¢: "ğ™–Ì‚",
      áº¥: "ğ™–Ì‚Ì",
      áº§: "ğ™–Ì‚Ì€",
      áº©: "ğ™–Ì‚Ì‰",
      áº«: "ğ™–Ì‚Ìƒ",
      áº­: "ğ™–Ì£Ì‚",
      b: "ğ™—",
      c: "ğ™˜",
      d: "ğ™™",
      Ä‘: "Ä‘",
      e: "ğ™š",
      Ã©: "ğ™šÌ",
      Ã¨: "ğ™šÌ€",
      áº»: "ğ™šÌ‰",
      áº½: "ğ™šÌƒ",
      áº¹: "ğ™šÌ£",
      Ãª: "ğ™šÌ‚",
      áº¿: "ğ™šÌ‚Ì",
      á»: "ğ™šÌ‚Ì€",
      á»ƒ: "ğ™šÌ‚Ì‰",
      á»…: "ğ™šÌ‚Ìƒ",
      á»‡: "ğ™šÌ£Ì‚",
      f: "ğ™›",
      g: "ğ™œ",
      h: "ğ™",
      i: "ğ™",
      Ã­: "ğ™Ì",
      Ã¬: "ğ™Ì€",
      á»‰: "ğ™Ì‰",
      Ä©: "ğ™Ìƒ",
      á»‹: "ğ™Ì£",
      j: "ğ™Ÿ",
      k: "ğ™ ",
      l: "ğ™¡",
      m: "ğ™¢",
      n: "ğ™£",
      o: "ğ™¤",
      Ã³: "ğ™¤Ì",
      Ã²: "ğ™¤Ì€",
      á»: "ğ™¤Ì‰",
      Ãµ: "ğ™¤Ìƒ",
      á»: "ğ™¤Ì£",
      Ã´: "ğ™¤Ì‚",
      á»‘: "ğ™¤Ì‚Ì",
      á»“: "ğ™¤Ì‚Ì€ ",
      á»•: "ğ™¤Ì‚Ì‰",
      á»—: "ğ™¤Ì‚Ìƒ",
      á»™: "ğ™¤Ì£Ì‚",
      Æ¡: "ğ™¤Ì›",
      á»›: "ğ™¤Ì›Ì",
      á»: "ğ™¤Ì›Ì€",
      á»Ÿ: "ğ™¤Ì›Ì‰",
      á»¡: "ğ™¤Ì›Ìƒ",
      á»£: "ğ™¤Ì›Ì£",
      p: "ğ™¥",
      q: "ğ™¦",
      r: "ğ™§",
      s: "ğ™¨",
      t: "ğ™©",
      u: "ğ™ª",
      Ãº: "ğ™ªÌ",
      Ã¹: "ğ™ªÌ€",
      á»§: "ğ™ªÌ‰",
      Å©: "ğ™ªÌƒ",
      á»¥: "ğ™ªÌ£",
      Æ°: "ğ™ªÌ›",
      á»©: "ğ™ªÌ›Ì",
      á»«: "ğ™ªÌ›Ì€",
      á»­: "ğ™ªÌ›Ì‰",
      á»¯: "ğ™ªÌ›Ìƒ",
      á»±: "ğ™ªÌ›Ì£",
      v: "ğ™«",
      w: "ğ™¬",
      x: "ğ™­",
      y: "ğ™®",
      Ã½: "ğ™®Ì",
      á»³: "ğ™®Ì€",
      á»·: "ğ™®Ì‰",
      á»¹: "ğ™®Ìƒ",
      á»µ: "ğ™®Ì£",
      z: "ğ™¯",
      A: "ğ˜¼",
      Ã: "ğ˜¼Ì",
      Ã€: "ğ˜¼Ì€",
      áº¢: "ğ˜¼Ì‰",
      Ãƒ: "ğ˜¼Ìƒ",
      áº : "ğ˜¼Ì£",
      Ä‚: "ğ˜¼Ì†",
      áº®: "ğ˜¼ÌÌ†",
      áº°: "ğ˜¼Ì€Ì†",
      áº²: "ğ˜¼Ì‰Ì†",
      áº´: "ğ˜¼ÌƒÌ†",
      áº¶: "ğ˜¼Ì£Ì†",
      Ã‚: "ğ˜¼Ì‚",
      áº¤: "ğ˜¼ÌÌ‚",
      áº¦: "ğ˜¼Ì€Ì‚",
      áº¨: "ğ˜¼Ì‰Ì‚",
      áºª: "ğ˜¼ÌƒÌ‚",
      áº¬: "ğ˜¼Ì£Ì‚",
      B: "ğ˜½",
      C: "ğ˜¾",
      D: "ğ˜¿",
      Ä: "ğ˜¿Ì›",
      E: "ğ™€",
      Ã‰: "ğ™€Ì",
      Ãˆ: "ğ™€Ì€",
      áºº: "ğ™€Ì‰",
      áº¼: "ğ™€Ìƒ",
      áº¸: "ğ™€Ì£",
      ÃŠ: "ğ™€Ì‚",
      áº¾: "ğ™€ÌÌ‚",
      á»€: "ğ™€Ì€Ì‚",
      á»‚: "ğ™€Ì‰Ì‚",
      á»„: "ğ™€ÌƒÌ‚",
      á»†: "ğ™€Ì£Ì‚",
      F: "ğ™",
      G: "ğ™‚",
      H: "ğ™ƒ",
      I: "ğ™„",
      Ã: "ğ™„Ì",
      ÃŒ: "ğ™„Ì€",
      á»ˆ: "ğ™„Ì‰",
      Ä¨: "ğ™„Ìƒ",
      á»Š: "ğ™„Ì£",
      J: "ğ™…",
      K: "ğ™†",
      L: "ğ™‡",
      M: "ğ™ˆ",
      N: "ğ™‰",
      O: "ğ™Š",
      Ã“: "ğ™ŠÌ",
      Ã’: "ğ™ŠÌ€",
      á»: "ğ™ŠÌ‰",
      Ã•: "ğ™ŠÌƒ",
      á»Œ: "ğ™ŠÌ£",
      Ã”: "ğ™ŠÌ‚",
      á»: "ğ™ŠÌÌ‚",
      á»’: "ğ™ŠÌ€Ì‚",
      á»”: "ğ™ŠÌ‰Ì‚",
      á»–: "ğ™ŠÌƒÌ‚",
      á»˜: "ğ™ŠÌ£Ì‚",
      Æ : "ğ™ŠÌ›",
      á»š: "ğ™ŠÌ›Ì",
      á»œ: "ğ™ŠÌ›Ì€",
      á»: "ğ™ŠÌ›Ì‰",
      á» : "ğ™ŠÌ›Ìƒ",
      á»¢: "ğ™ŠÌ›Ì£",
      P: "ğ™‹",
      Q: "ğ™Œ",
      R: "ğ™",
      S: "ğ™",
      T: "ğ™",
      U: "ğ™",
      á»¤: "ğ™Ì£",
      V: "ğ™‘",
      W: "ğ™’",
      X: "ğ™“",
      Y: "ğ™”",
      Ã: "ğ™”Ì",
      á»²: "ğ™”Ì€",
      á»¶: "ğ™”Ì‰",
      á»¸: "ğ™”Ìƒ",
      á»´: "ğ™”Ì£",
      Z: "ğ™•",
      0: "ğŸ",
    1: "ğŸ",
    2: "ğŸ",
    3: "ğŸ‘",
    4: "ğŸ’",
    5: "ğŸ“",
    6: "ğŸ”",
    7: "ğŸ•",
    8: "ğŸ–",
    9: "ğŸ—"
    };
  
    let formattedText = "";
    for (const char of text) {
      if (char in fontMapping) {
        formattedText += fontMapping[char];
      } else {
        formattedText += char;
      }
    }
    return formattedText;
  }